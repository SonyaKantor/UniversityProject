<!DOCTYPE html>
<html>
        <head>
        <title>Books for all</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href ="styles.css">  
        <script type="text/javascript" src="javascripts.js"></script>
    </head>
    <header>
        <div> 
                        
            <ul>
                <li><a href="index.html"><img src="images/home-page.png" height="30px" width="30px" alt="Main-page"></a></li>
                <li><a href="Help-page.html"><img src="images/help-sign.png" height = 30px width = 30px alt = "Help"> Help</a> </li>
                <li></li><li></li><li></li><li></li><li></li>
                <li><a href="Log-in.html"><img src="images/log-signup1.png" height = 30px width = 30px alt="Login/Signup">Login/Signup</a></li>
                <li><a href="Cart.html"><img src="images/s-cart.png" height = 30px width = 30px alt = "Cart">Cart</a> </li>        
                <li id = "user" class="user"></li>
                <script src="scripts.js"></script>   
            </ul>
            <div>          

                <form>
                    <img class="logo" src = "images/logo.png" height ="60px" width ="120px"  >                    
                     <input id="search_v" type="Search" placeholder ="Search for Book title/Author/ISBN">
                    <button class="search" type ="button" id="search">Search</button> 
                                    <script>
                    
                        
                    var b = document.getElementById("search");
                    b.addEventListener("click", search);               
                    function search(){
                     var sear = document.getElementById("search_v").value;   
                                         console.log(sear); 
                     window.localStorage.setItem("sear",JSON.stringify(sear));
                     window.location.href="search_result.html";
//                        doCompletion("search", "search="+sear);
                    }
                </script> 
                </form>
            </div>
        </div>
    </header>
    <body onload='logged()'>
        <main class="forgot">
            <h2>Password assistance</h2>
            <p>Forgot a password? Enter your email:<p>
            <form>
                <h5 class="c-us" ><label for="email">E-mail address:</label> <input type="text" id="forgot_email" name="Email" ></h5>
                <p>Enter your new password.Password should be longer than 6 characters:</p> 
                <h5 class="c-us" ><label for="password">New Password:</label> <input type="password" id="newpass" name="password"   ></h5>
                <p>Confirm your password:</p>
                <h6 class="c-us" ><label for="password">Confirm Password:</label> <input type="password" id="confpass" name="c_password" ></h6>
                <h5 id="passresult" class="passresult"></h5>                
                <br><h6 class="flog"><a href="Log-in.html">Remember your password? Login.</a> </h6>
                <h6 class="flog"><a href = "Register.html">Not a member yet? Sign up</a></h6>

                <div><button class="search" type = "button" id="forgotbtn">Renew password</button></div>
            <script>
                // check if email exists
                var b = document.getElementById('forgotbtn');
                    b.addEventListener("click", changepass)
                    function changepass(){
                        var email = document.getElementById('forgot_email').value;
                        var newpass = document.getElementById('newpass').value;
                        var confirm = document.getElementById('confpass').value;
                        console.log(newpass);
                        console.log(confirm);
                        if(newpass.length < 6){
                            document.getElementById('passresult').innerHTML = "Password is too short.";
                            console.log(newpass.length < 6);
                        }
                        else if(newpass!==confirm){
                            document.getElementById('passresult').innerHTML = "Passwords are not matching";
                            console.log(confirm);
                        }
                        else{
                            var result = doCompletion('forgot',"email="+email+'&&password='+newpass);
                             document.getElementById('passresult').innerHTML = "Password has been changed succesfully";
                             console.log(newpass);
                        }
                    }
            </script>
            </form>            
        </main>
    </body>
    <footer >
        <div class="footer_c">
        <div></div>
        <div>
            <h5>About us </h5>
            <p><a href="Site-map.html"> Site map</a><p>
            <p><a href="Contact-us.html">Contact us</a><p>
            <p><a href="Log-in.html">Login/Signup</a><p>
        </div>
        <div>
            <h5>Need a help?</h5>
        </div>
        <div>
            <h5>Shipping </h5>
        </div>
        </div>
    </footer>
</html>
